## 正则实战案例解析

### 案例1

#### 需求

```java
## 1. 输入内容
一些[@姓名]文本[@姓名/张小飞]你好@水果/水蜜桃

## 2. 输出内容
@姓名
@姓名/张小飞
@水果/水蜜桃

## 3. 处理规则
需要匹配出所有`@词典/词条`, 当没有词条时匹配出词典.

@后面表示词典
/后面表示词典

如果有 [ ] 号时, 则以它为界限。

## 4. 程序语言
JavaScript
```

#### 实现1

```java
@[^@\[\]\/\s]+\/?([^@\[\]\/\s]+)?
```

#### 解析1

```java
@[^@\[\]\/\s]+\/?([^@\[\]\/\s]+)?

@ 按字面匹配 字符 @，(区分大小写)
匹配不在下列列表中的一个单字符 [^@\[\]\/\s]+
+ 量词 — 匹配1到无穷次，尽可能多匹配，如果有必要，回溯匹配更少内容(贪婪)
  @ 按字面匹配 字符 @，(区分大小写)
  \[ 按字面匹配 字符 [，(区分大小写)
  \] 按字面匹配 字符 ]，(区分大小写)
  \/ 按字面匹配 字符 /，(区分大小写)
  \s 匹配空白符(等价于[\r\n\t\f\v ])
  \/? 按字面匹配 字符 /，(区分大小写)
? 量词 — 匹配零个到1次，尽可能多匹配，如果有必要，回溯匹配更少内容(贪婪)
  1st捕获组： ([^@\[\]\/\s]+)?
? 量词 — 匹配零个到1次，尽可能多匹配，如果有必要，回溯匹配更少内容(贪婪)
匹配不在下列列表中的一个单字符 [^@\[\]\/\s]+
  + 量词 — 匹配1到无穷次，尽可能多匹配，如果有必要，回溯匹配更少内容(贪婪)
  @ 按字面匹配 字符 @，(区分大小写)
  \[ 按字面匹配 字符 [，(区分大小写)
  \] 按字面匹配 字符 ]，(区分大小写)
  \/ 按字面匹配 字符 /，(区分大小写)
  \s 匹配空白符(等价于[\r\n\t\f\v ])
```

- 主体是分成两段式
- 其中`^@\[\]\/\s`表示匹配不在`@[]/\s`这几个字符

### 案例2

#### 需求

```java
## 1. 输入内容
lg[(（]([^(（）)]+)[）)]

## 2. 输出内容
lg（W*10）
lg（W）
```

#### 实现

```java
lg[(（]([^(（）)]+)[）)]
```

#### 解析

```java

lg[(（]([^(（）)]+)[）)]

lg 按字面匹配 字符 lg，(区分大小写)
匹配下列列表中的一个单字符 [(（]
  (（ 从列表 (（ (区分大小写) 中匹配一个单字符
1st捕获组： ([^(（）)]+)
  匹配不在下列列表中的一个单字符 [^(（）)]+
    + 量词 — 匹配1到无穷次，尽可能多匹配，如果有必要，回溯匹配更少内容(贪婪)
    (（）) 从列表 (（）) (区分大小写) 中匹配一个单字符
匹配下列列表中的一个单字符 [）)]
  ）) 从列表 ）) (区分大小写) 中匹配一个单字符
```

- 需求中给出的括号是中文括号（
- `^(（）)`是剔除中文括号中再有的括号

### 案例3

#### 需求

![image-20211118095406376](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211118095406376.png)

```java
## 1. 输入内容
777TG
999AB
666DG
788YH
678GU

## 2. 输出内容
777TG
999AB
666DG
```

#### 实现

```java
^(\d)\1{2}[A-Z]{2}
```

#### 解析

```java

^(\d)\1{2}[A-Z]{2}

^ 断言此为一行的起始位置
1st捕获组： (\d)
  \d 匹配一个数字字符（等价于[0-9]）
\1{2} 匹配与捕获组1st最近匹配的相同的文本
  {2} 量词 — 匹配2次
匹配下列列表中的一个单字符 [A-Z]{2}
  {2} 量词 — 匹配2次
  A-Z 单字符在A (index 65) 至 Z (index 90) 区间
```

- 需要注意的是`\1`这个用法，`\1{2}` 匹配与捕获组1st最近匹配的相同的文本
- 同理`^(\d)(\w)\2{2}[A-Z]{2}$`可以捕获到`5sssYU`这种case





### 案例4

#### 需求

```java
输入：
123456789

输出：
123
234
345
456
567
678
789

按三个切
```

#### 实现

```java
(?=([0-9]{3}))
```

#### 解析

```java
(?=([0-9]{3}))

肯定型顺序环视 (?=([0-9]{3}))
  断言表达式后面匹配以下正则
  1st捕获组： ([0-9]{3})
    匹配下列列表中的一个单字符 [0-9]{3}
    {3} 量词 — 匹配3次
    0-9 单字符在0 (index 48) 至 9 (index 57) 区间
```







### 案例5

#### 需求

```java
123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 
123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 
123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 123 123 456 789 234 
# 上面的这些空格是tab
# 怎么能快速分类每七组换个行？
```

#### 实现

```java
(?:\d+\s){7}  使用$0\n换行替换
```

#### 解析

```java
(?:\d+\t){7}

非捕获组： (?:\d+\s){7}
{7} 量词 — 匹配7次
  \d+ 匹配一个数字字符（等价于[0-9]）
    + 量词 — 匹配1到无穷次，尽可能多匹配，如果有必要，回溯匹配更少内容(贪婪)
\t 匹配一个制表符(ASCII 9)
```





### 案例6

#### 需求

```java
# 获取showlog 至showlog后第一个total之间的字符
showlog
xxxxx
asdfasdfasdfasdfsf
total
showlog -v
asdfasdfasdfs
asdfasdfasdfasdfasdfas
total
showlog -d
asdfasdfasdfs
asdfasdfasdfasdfasdfas
total
```

#### 实现

```java
(?<=showlog)(\n|.)*?(?=\ntotal)
```

#### 解析

```java

```







### 案例7

#### 需求

```java
3.2.2待处理的文本待处理的文本 ,1.待处理的文本；
4.8.1待处理的文本待处理的文本 ,1.待处理的文本；
9.14.5待处理的文本待处理的文本 ,1.待处理的文本；
  
```

#### 实现

```java
(?<=[:：])( \d[. ．、](?!.*[.\d])\S+$)
```

#### 解析

```java

```





### 案例8

#### 需求

```java
single
and we think there
and we think there
single line
It is possible to
It is possible to
single line
and we think there
It is possible to
single
single
  
//去除文本中的重复行，而不仅仅是连续的重复行
```

#### 实现

```java
^(.*+)$\n(?=[\s\S]*?^\1$)
```

#### 解析

```java

```



### 案例9

#### 需求

```java
判断必须有大写字母小写字母特殊符号 8到16个字符
```

#### 实现

```java
(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[\W_])^.{8,16}$
```

#### 解析

```java

```











### 案例

#### 需求

```java

```

#### 实现

```java

```

#### 解析

```java

```

