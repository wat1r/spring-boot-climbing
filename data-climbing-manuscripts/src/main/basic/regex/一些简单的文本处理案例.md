## 一些简单的文本处理案例

> **这里基本很多的替换操作是基于Notepad++文本处理工具来完成操作的，也可以选用其他诸如UltraEdit文本处理工具，以个人习惯为准**



### 前言

- `\b ` 断言此位置为单词边界：`(^\w|\w$|\W\w|\w\W)`
- `\B`断言此位置不是单次边界`\b`
- `\w `匹配任意单词字符(等价于`[a-zA-Z0-9_]`)

- `\W`匹配任意非单词字符(等价于`[^a-zA-Z0-9_]`)
- `\s` 匹配空白符(等价于`[\r\n\t\f\v ]`)
- `\S` 匹配任意非空白字符(等价于`[^\r\n\t\f\v ]`)
- `\d` 匹配一个数字字符（等价于`[0-9]`）
- `\d` 匹配任意非数字字符（等价于`^[0-9]`）

### 开胃

- `(\d)\1{2,}(\w+)`

```java
## 输入内容

777TG
999AB
666DG
788YH
678GU

## 2. 输出内容

777TG
999AB
666DG
```

### 在文本头尾追加字符

```java
 wfId
 prevWfId
 constraintStatus
 offsetList
 offsetUnit
 offsetStep
 offsetType
 status
 userName
     -> 
     
private String wfId;
```

#### 方式1：NotePad++ 自带

```java
Alt 拖动
```

#### 方式2：NotePad++ 正则

```java
^(.*)$
private String $1;
```

#### 方法3：脚本处理

- 每行开头追加`sed  's/^/HEAD_/g' t1.txt`
- 每行结尾追加`sed 's/$/_TAIL/' t1.txt`

- 一起追加`sed '/./{s/^/HEAD_/;s/$/_TAIL/}'  t1.txt`



### 替换掉干扰字符，整理出sql

- `\\t|\\n|\+|"`

```sql
"SELECT game_id\n" +
                "\t,date_month\n" +
                "\t,sum(deposit_amount) deposit_amount\n" +
                "FROM (\n" +
                "\tSELECT game_id\n" +
                "\t\t,month(part_date) date_month\n" +
                "\t\t,deposit_amount\n" +
                "\tFROM dw.test_log\n" +
                "\tWHERE PART_DATE >= '2021-04-01'\n" +
                "\t\tAND PART_DATE <= '2021-06-31'\n" +
                "\t\tAND deposit_status = 5\n" +
                "\t\tAND deposit_amount > 0\n" +
                "\t\tAND game_id IN (991003632)\n" +
                "\t) a\n" +
                "GROUP BY game_id\n" +
                "\t,date_month\n" +
                "ORDER BY game_id\n" +
                "\t,date_month"
```

### 替换掉干扰字符，空行

- `✔|\(no match\)| |\t|✕|^(\s*)\r\n`

```java


✕anyway (no match)
✕bone (no match)
✕cinema (no match)
✕cover (no match)
✕define (no match)
✕economy (no match)
✕eleven (no match)
✕eye (no match)
✕hesitate (no match)
✕key (no match)
✕majority (no match)
✕music (no match)
✕palace (no match)
✕potato (no match)
✕relax (no match)
✕royal (no match)
✕surely (no match)
✕typical (no match)
✕vocabulary (no match)
✕water (no match)	

✔action (no match)
✔blue (no match)
✔certain (no match)
✔crown (no match)
✔equal (no match)
✔gamble (no match)
✔jacket (no match)
✔lawyer (no match)
✔multiply (no match)
✔mysterious (no match)
✔news (no match)
✔odd (no match)
✔opposite (no match)
✔prize (no match)
✔quit (no match)
✔symbol (no match)
✔thirteen (no match)
✔toe (no match)
✔try (no match)
✔young (no match)
```

### 合并每一行数据，并加上","

- 分割`\r\n`

```java
STAT_DATE
AGG_CODE
GAME_ID
R_TYPE
AREA_ID
GROUP_ID
CONSUME_NUM
CONSUME_AMOUNT
->
STAT_DATE,AGG_CODE,GAME_ID,R_TYPE,AREA_ID,GROUP_ID,CONSUME_NUM,CONSUME_AMOUNT
```

### 拼装sql的drop语句

- `drop table dw.($1);`

```java
pt_collect_log_total_test_20150113
pt_collect_log_total_test_20150830
pt_collect_log_total_test_20150904
pt_collect_log_total_test_20151022
pt_collect_log_total_test_20151121
pt_collect_log_total_test_20160113
pt_collect_log_total_test_20160306
pt_collect_log_total_test_20160430
pt_collect_log_total_test_20160616
pt_collect_log_total_test_20160707
pt_collect_log_total_test_20160816
pt_collect_log_total_test_20161028
pt_collect_log_total_test_20161207
pt_collect_log_total_test_20161226
pt_collect_log_total_test_20170104
pt_collect_log_total_test_20170120
pt_collect_log_total_test_20170509
pt_collect_log_total_test_20170524
pt_collect_log_total_test_20170914
    
-> 
//  
drop table dw.pt_collect_log_total_test_20170914;    
```

### 将每一行的英文单词转换成大写

- 比如说`test this sentence one` 转换成s`Test This Sentence One`

- `^.*$   ->  \L$0 `大写字母转小写字母
- `^.*$   ->  \U$0 `小写字母转大写字母
- `\b(\w)(\w*)\b`     ===> `\U$1\L$2`

```java
test this sentence one
test this sentence two
test this sentence three
test this sentence four
test this sentence five
test this sentence six
test this sentence seven
test this sentence eight
test this sentence nine
```





```java
\U 将匹配项转为大写(Upper)
\L 将匹配项转为小写(Lower)
\E 终止转换(End)
$0 表示全匹配
$1 表示第一个括号内容
$2 第二个括号
```





### Reference

- [notepadd++正则表达式大小写转换](https://www.cnblogs.com/njl041x/p/9626509.html)









