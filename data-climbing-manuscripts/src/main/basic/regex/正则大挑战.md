## 正则大挑战

最近发现的一个网站，关于正则的练习网站：https://alf.nu/RegexGolf，大概16题，从Easy到Hard，覆盖的面很广，有评分，也有很多大佬追求极致评分，页面大概长下面这样，让我们现在开始吧。

因为网站改版，现在已经不显示分数了，大致的评分机制如下：

> **Points = (需求列表匹配数 * 10) - (不允许列表匹配数 * 10) - 表达式字符数**

例如：`foo`的字符数是3，需求列表匹配数=42，不允许列表匹配数=21，代入上面的公式：得到的分数是$207$分

![image-20211202193842550](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202193842550.png)

### 1.Warmup

> **Type a regex in the box.**

![image-20211202194348535](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202194348535.png)

- 仔细观察，左侧的字符都出现了`foo`这字符，右侧则没有，因此直接填入`foo`可以解，得分为$207$分

### 2.Anchors

> **You are deducted one point per character you use, and ten if you match something you shouldn't.**

![image-20211202200058573](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202200058573.png)

- 左侧的每个字符都是以`ick`结尾的，使用`ick$`,得分$206$分，如果还想要精简一下的话，`k$`也可以做到匹配，得分能到$208$分

紧接着，根据上一题的做法，给了下面这道题，但是不允许有`$`

![image-20211202200817589](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202200817589.png)

- 考虑使用`\b`这个匹配，`\b` 断言此位置为单词边界：`(^\w|\w$|\W\w|\w\W)`,`u\b`可以解本题，得分$207$分

### 3.Ranges  

> **The test vectors were generated by grepping /usr/dict/words. Can you tell?**

![image-20211202201549249](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202201549249.png)

- 考察的是字母的范围，观察下来，左侧的字母都是`a-f`之间的，右侧不需要匹配的，则超出了这个范围，`^[a-f]*$`可以解，要求`a-f`的字符出现了0次以上，得分$202$分

### 4.Backrefs

> **This doesn't really work as a tutorial. Not really clear what you're supposed to do here.**

![image-20211202201649129](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202201649129.png)

- 观察下来是`xxx......xxx`这样的形式，如`allochirally`,`all`在前面出现过一次，在后面又出现了一次，这种结构很容易使用反向引用解决，`(...).*\1`可以解决，得分$201$分，其中`\1`匹配与捕获组**1st**最近匹配的相同的文本，也就是前面的那个括号

### 5.Abba

> **Let's pretend this one is not a rehash of the last one.**

![image-20211202202503628](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202202503628.png)

- 这一题要求的是不能匹配形如`abba`这样结构的字符，如右侧的an**alla**gmatic这个单词，**alla**便是这种结构，需要把这种结构的字符全部排除掉
- 使用负向零宽先行断言，可以筛选出左侧匹配上的，`(?!(.)(.)\2\1)`,但是右侧的不能筛选出来，而且需要排除掉这种串`****xoox****`，只需要在前后补字符并把这段能匹配上的字符全部排除掉，`^(?!.*(.)(.)\2\1.*)`为最终解，这个字符是19个，总的是43个单词，扣除右边不要的22个单词，得分是210-19=$191$分
- 在本题中，去掉最后的字符匹配也能通过，`^(?!.*(.)(.)\2\1)`,得分来到$193$

- 还看到多大神的一种解法`^(?!.*(.)\1)`相当于强制筛选a**bb**a中间的结构，而不管前后的a，然而输入进去后，发现左侧有两个应该要匹配的字符匹配不上，这时候观察了下这个两个字符，都有`ef两个相连的字符`，`^(?!.*(.)\1)|ef`可以解本题，得分来到$195$分

![image-20211202205344106](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202205344106.png)

### 6.A man, a plan

>  **You're allowed to cheat a little. Even in hard mode, words will be no longer than 13 characters.**

![image-20211202205801357](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202205801357.png)

- 本题是要找这种回文结构，如**deed**eed，**civic**，也就是常说的偶回文，奇回文，写出`(.)(.).?\2\1`后发现，右侧有一个字符没有被排除掉，观察左侧的字符，可以往后再多多加一个字符强制提前结束，写出这样的正则：`(.)(.).?\2\1.?$`,得分为$175$分

![image-20211202210030130](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202210030130.png)

- 但是本题题干部分给出了「cheat」的字眼，那我们就不客气了，精简到只反向引用一个字符，写出`^(.).*\1$`，但是如下图，右侧有一个单词没有被排除掉，采用「cheat」的方式，排除掉这个单词`^(.)[^p].*\1$`,得分来到$177$

![image-20211202210930693](/Users/frankcooper/Library/Application Support/typora-user-images/image-20211202210930693.png)



















https://www.zhihu.com/question/24824487







https://blog.csdn.net/weixin_33843409/article/details/93008420

https://zhuanlan.zhihu.com/p/39431062

https://blog.csdn.net/njyr21/article/details/79600217

https://gist.github.com/jonathanmorley/8058871





